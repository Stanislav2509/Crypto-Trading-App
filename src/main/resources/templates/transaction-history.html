<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Transaction History</title>
</head>
<body>
<a href="/real-time-prices">Home Page</a>
<table border="1">
    <thead>
      <tr>
          <th>Crypto Type</th>
          <th>Transaction Type</th>
          <th>Spend Money</th>
          <th>Receive Crypto</th>
          <th>Spend Crypto</th>
          <th>Receive Money</th>
          <th>Price During the deal</th>
          <th>Date time</th>
          <th>Profit/Loss</th>
      </tr>
    </thead>
  <tbody>
  <tr th:each ="tran : ${transactions}">
    <td th:text="${tran.cryptoType.symbol}"></td>
    <td th:text="${tran.transactionType}"></td>
    <td th:text="${tran.spendMoney != null ? tran.spendMoney : '0'}"></td>
    <td th:text="${tran.receiveCrypto != null ? tran.receiveCrypto.stripTrailingZeros().toPlainString() : '0'}"></td>
    <td th:text="${tran.spendCrypto != null ? tran.spendCrypto.stripTrailingZeros().toPlainString() : '0'}"></td>
    <td th:text="${tran.receiveMoney != null ? tran.receiveMoney : '0'}"></td>
    <td th:text="${tran.currCryptoPrice != null ? tran.currCryptoPrice.stripTrailingZeros().toPlainString() : '0'}"></td>
    <td th:text="${#temporals.format(tran.dateTime, 'dd.MM.yyyy HH:mm')}"></td>
    <td th:id = "profitLoss" th:text="${tran.profitLoss}"></td>
  </tr>
  </tbody>
</table>
<script>
    document.querySelectorAll("#profitLoss").forEach(function (el) {
        let number = parseFloat(el.textContent);
        let roundedNumber = number.toFixed(2);
        el.innerText = roundedNumber;
    });
</script>
</body>
</html>